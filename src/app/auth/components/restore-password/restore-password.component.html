<div class="row">
    <div *ngIf="!isLoading && !isTokenValid" class="card card-body col col-md-10 col-lg-6 align-self-center">
        <p class="alert alert-danger">Votre session a expiré. Veuillez vous reconnecter svp.</p>
    </div>
    <div *ngIf="isLoading" class="card card-body col col-md-10 col-lg-6 align-self-center">
        <loaders-css [loader]="'ball-scale-multiple'" [loaderClass]="'my-loader'"></loaders-css>
        <p class="mt-3 alert alert-info">Vérification de la validité de la session en cours...</p>
    </div>
</div>
<section *ngIf="isTokenValid" class="login-form row">
    <div class="card card-body col col-md-10 col-lg-6 align-self-center">
        <div *ngIf="isProcessing">
            <loaders-css [loader]="'ball-scale-multiple'" [loaderClass]="'my-loader'"></loaders-css>
            <p class="mt-3 alert alert-info">Restoration de votre compte en cours...</p>
        </div>
        <div *ngIf="!isProcessing">
            <header>
                <h1 class="card-title">Restaurer votre compte</h1>
            </header>
            <div>
                <form [formGroup]="restoreForm" novalidate>
                    <div class="form-group">
                        <label for="email-{{compId}}" class="center-block">Email</label>
                        <input id="email-{{compId}}" type="text" class="form-control" formControlName="email" placeholder="me@example.org" />
                        <ul *ngIf="restoreForm.controls.email.invalid && (restoreForm.controls.email.dirty || restoreForm.controls.email.touched)"
                            class="alert alert-danger">
                            <li *ngIf="restoreForm.controls.email.errors.required">Le champ Email est requis</li>
                            <li *ngIf="restoreForm.controls.email.errors.email">Le format de l'email est invalide</li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <label for="password-{{compId}}" class="center-block">Mot de passe</label>
                        <input id="password-{{compId}}" type="password" class="form-control" formControlName="password" placeholder="password" />
                    </div>
                    <div class="form-group">
                        <label for="confirm-password-{{compId}}" class="center-block">Confirmez le mot de passe</label>
                        <input id="confirm-password-{{compId}}" type="password" class="form-control" formControlName="confirmPassword" placeholder="password"
                        />
                    </div>
                    <input type="hidden" formControlName="recoveryToken" [ngModel]="recoveryToken"  >
                    <ul class="invalid-feedback" *ngIf="restoreForm.errors">
                        <li>Le mot de passe confirmé n'est pas similaire</li>
                    </ul>
                </form>
            </div>
            <footer>
                <button type="button" class="btn btn-primary" (click)="changePassword($event)" [disabled]="!restoreForm.valid">Restorer le compte</button>
                <div>{{restoreForm.value | json }}</div>
            </footer>
        </div>
    </div>
</section>